{"ast":null,"code":"var _jsxFileName = \"/home/bernardoabreu/Desktop/wp5-dashboard/dashboard/src/App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useEffect, useState, lazy, Suspense } from \"react\";\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction loadComponent(scope, module) {\n  return async () => {\n    // Initializes the share scope. This fills it with known provided modules from this build and all remotes\n    // eslint-disable-next-line no-undef\n    await __webpack_init_sharing__(\"default\");\n    const container = window[scope]; // or get the container somewhere else\n    // Initialize the container, it may provide shared modules\n    // eslint-disable-next-line no-undef\n\n    await container.init(__webpack_share_scopes__.default);\n    const factory = await window[scope].get(module);\n    const Module = factory();\n    return Module;\n  };\n}\n\nconst useDynamicScript = args => {\n  _s();\n\n  const [ready, setReady] = useState(false);\n  const [failed, setFailed] = useState(false);\n  useEffect(() => {\n    if (!args.url) return;\n    const element = document.createElement(\"script\");\n    element.src = args.url;\n    element.type = \"text/javascript\";\n    element.async = true;\n    setReady(false);\n    setFailed(false);\n\n    element.onload = () => {\n      console.log(`Dynamic Script Loaded: ${args.url}`);\n      setReady(true);\n    };\n\n    element.onerror = () => {\n      console.error(`Dynamic Script Error: ${args.url}`);\n      setReady(false);\n      setFailed(true);\n    };\n\n    document.head.appendChild(element);\n    return () => {\n      console.log(`Dynamic Script Removed: ${args.url}`);\n      document.head.removeChild(element);\n    };\n  }, [args.url]);\n  return {\n    ready,\n    failed\n  };\n};\n\n_s(useDynamicScript, \"cgCmnFs4LO4f1+dqEfelQq09bhU=\");\n\nconst RemoteReactComponent = props => {\n  _s2();\n\n  const {\n    ready,\n    failed\n  } = useDynamicScript({\n    url: props.system.url && props.system.url\n  });\n  if (!props.system) return /*#__PURE__*/_jsxDEV(\"h2\", {\n    children: \"Not system specified\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 28\n  }, this);\n  if (!ready) return /*#__PURE__*/_jsxDEV(\"h2\", {\n    children: [\"Loading dynamic script: \", props.system.url]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 22\n  }, this);\n  if (failed) return /*#__PURE__*/_jsxDEV(\"h2\", {\n    children: [\"Failed to load dynamic script: \", props.system.url]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 22\n  }, this);\n  const Component = /*#__PURE__*/lazy(loadComponent(props.system.scope, props.system.module));\n  return /*#__PURE__*/_jsxDEV(Suspense, {\n    fallback: \"Loading System\",\n    children: /*#__PURE__*/_jsxDEV(Component, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(RemoteReactComponent, \"DD7iWqYvsRB3t/fItKErVD9mgCY=\", false, function () {\n  return [useDynamicScript];\n});\n\n_c = RemoteReactComponent;\n\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 10\n    },\n    children: /*#__PURE__*/_jsxDEV(RemoteReactComponent, {\n      url: \"http://localhost:3001/graph1/remoteEntry.js\",\n      module: \"graph1mod\",\n      scope: \"graph1scope\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = App;\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"RemoteReactComponent\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"sources":["/home/bernardoabreu/Desktop/wp5-dashboard/dashboard/src/App.js"],"names":["useEffect","useState","lazy","Suspense","loadComponent","scope","module","__webpack_init_sharing__","container","window","init","__webpack_share_scopes__","default","factory","get","Module","useDynamicScript","args","ready","setReady","failed","setFailed","url","element","document","createElement","src","type","async","onload","console","log","onerror","error","head","appendChild","removeChild","RemoteReactComponent","props","system","Component","App","padding"],"mappings":"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","sourcesContent":["import { useEffect, useState, lazy, Suspense } from \"react\";\nimport './App.css';\n\nfunction loadComponent(scope, module) {\n  return async () => {\n    // Initializes the share scope. This fills it with known provided modules from this build and all remotes\n    // eslint-disable-next-line no-undef\n    await __webpack_init_sharing__(\"default\");\n\n    const container = window[scope]; // or get the container somewhere else\n    // Initialize the container, it may provide shared modules\n    // eslint-disable-next-line no-undef\n    await container.init(__webpack_share_scopes__.default);\n    const factory = await window[scope].get(module);\n    const Module = factory();\n    return Module;\n  };\n}\n\nconst useDynamicScript = (args) => {\n  const [ready, setReady] = useState(false);\n  const [failed, setFailed] = useState(false);\n\n  useEffect(() => {\n    if(!args.url) return;\n\n    const element = document.createElement(\"script\");\n\n    element.src = args.url;\n    element.type = \"text/javascript\";\n    element.async = true;\n\n    setReady(false);\n    setFailed(false);\n\n    element.onload = () => {\n      console.log(`Dynamic Script Loaded: ${args.url}`);\n      setReady(true);\n    };\n\n    element.onerror = () => {\n      console.error(`Dynamic Script Error: ${args.url}`);\n      setReady(false);\n      setFailed(true);\n    };\n\n    document.head.appendChild(element);\n\n    return () => {\n      console.log(`Dynamic Script Removed: ${args.url}`);\n      document.head.removeChild(element);\n    };\n  }, [args.url])\n\n  return {\n    ready,\n    failed\n  };\n};\n\nconst RemoteReactComponent = (props) => {\n  const { ready, failed } = useDynamicScript({\n    url: props.system.url && props.system.url,\n  });\n\n  if(!props.system) return <h2>Not system specified</h2>;\n\n  if (!ready) return <h2>Loading dynamic script: {props.system.url}</h2>;\n  \n  if (failed) return <h2>Failed to load dynamic script: {props.system.url}</h2>;\n\n  const Component = lazy(loadComponent(props.system.scope, props.system.module));\n\n  return (\n    <Suspense fallback=\"Loading System\">\n      <Component />\n    </Suspense>\n  )\n}\n\nfunction App() {\n  return (\n    <div style={{\n      padding: 10,\n    }}>\n      <RemoteReactComponent \n        url=\"http://localhost:3001/graph1/remoteEntry.js\"\n        module=\"graph1mod\"\n        scope=\"graph1scope\"\n      />\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}