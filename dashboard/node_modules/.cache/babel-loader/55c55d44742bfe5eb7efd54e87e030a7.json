{"ast":null,"code":"var _jsxFileName = \"/home/bernardoabreu/Desktop/wp5-dashboard/dashboard/src/App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useEffect, useState, lazy, Suspense } from \"react\";\nimport './App.css';\nimport { RecoilRoot, atom, useRecoilState } from \"recoil\";\nimport { ThemeProvider } from \"emotion-theming\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction loadComponent(scope, module) {\n  return async () => {\n    // Initialize the container, it may provide shared modules\n    const factory = await window[scope].get(module);\n    const Module = factory();\n    return Module;\n  };\n}\n\nconst useDynamicScript = args => {\n  _s();\n\n  const [ready, setReady] = useState(false);\n  const [failed, setFailed] = useState(false);\n  useEffect(() => {\n    if (!args.url) return;\n    const element = document.createElement(\"script\");\n    element.src = args.url;\n    element.type = \"text/javascript\";\n    element.async = true;\n    setReady(false);\n    setFailed(false);\n\n    element.onload = () => {\n      console.log(`Dynamic Script Loaded: ${args.url}`);\n      setReady(true);\n    };\n\n    element.onerror = () => {\n      console.error(`Dynamic Script Error: ${args.url}`);\n      setReady(false);\n      setFailed(true);\n    };\n\n    document.head.appendChild(element);\n    return () => {\n      console.log(`Dynamic Script Removed: ${args.url}`);\n      document.head.removeChild(element);\n    };\n  }, [args.url]);\n  return {\n    ready,\n    failed\n  };\n};\n\n_s(useDynamicScript, \"cgCmnFs4LO4f1+dqEfelQq09bhU=\");\n\nconst RemoteReactComponent = ({\n  url,\n  module,\n  scope\n}) => {\n  _s2();\n\n  const {\n    ready,\n    failed\n  } = useDynamicScript({\n    url\n  });\n  if (!ready) return /*#__PURE__*/_jsxDEV(\"h2\", {\n    children: [\"Loading dynamic script: \", url]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 22\n  }, this);\n  if (failed) return /*#__PURE__*/_jsxDEV(\"h2\", {\n    children: [\"Failed to load dynamic script: \", url]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 22\n  }, this);\n  const Component = /*#__PURE__*/lazy(loadComponent(scope, module));\n  return /*#__PURE__*/_jsxDEV(Suspense, {\n    fallback: \"Loading System\",\n    children: /*#__PURE__*/_jsxDEV(Component, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(RemoteReactComponent, \"DD7iWqYvsRB3t/fItKErVD9mgCY=\", false, function () {\n  return [useDynamicScript];\n});\n\n_c = RemoteReactComponent;\nconst theme = {\n  colors: {\n    primary: \"hotpink\"\n  }\n};\n\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(ThemeProvider, {\n    theme: theme,\n    children: /*#__PURE__*/_jsxDEV(RecoilRoot, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: 10\n        },\n        children: /*#__PURE__*/_jsxDEV(RemoteReactComponent, {\n          url: \"http://localhost:3001/graph1/remoteEntry.js\",\n          module: \"graph1mod\",\n          scope: \"graph1scope\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n\n_c2 = App;\nexport default App;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"RemoteReactComponent\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"sources":["/home/bernardoabreu/Desktop/wp5-dashboard/dashboard/src/App.js"],"names":["useEffect","useState","lazy","Suspense","RecoilRoot","atom","useRecoilState","ThemeProvider","loadComponent","scope","module","factory","window","get","Module","useDynamicScript","args","ready","setReady","failed","setFailed","url","element","document","createElement","src","type","async","onload","console","log","onerror","error","head","appendChild","removeChild","RemoteReactComponent","Component","theme","colors","primary","App","padding"],"mappings":"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","sourcesContent":["import { useEffect, useState, lazy, Suspense } from \"react\";\nimport './App.css';\nimport { RecoilRoot, atom, useRecoilState } from \"recoil\";\nimport { ThemeProvider } from \"emotion-theming\";\n\nfunction loadComponent(scope, module) {\n  return async () => {\n    // Initialize the container, it may provide shared modules\n    const factory = await window[scope].get(module);\n    const Module = factory();\n    return Module;\n  };\n}\n\nconst useDynamicScript = (args) => {\n  const [ready, setReady] = useState(false);\n  const [failed, setFailed] = useState(false);\n\n  useEffect(() => {\n    if(!args.url) return;\n\n    const element = document.createElement(\"script\");\n\n    element.src = args.url;\n    element.type = \"text/javascript\";\n    element.async = true;\n\n    setReady(false);\n    setFailed(false);\n\n    element.onload = () => {\n      console.log(`Dynamic Script Loaded: ${args.url}`);\n      setReady(true);\n    };\n\n    element.onerror = () => {\n      console.error(`Dynamic Script Error: ${args.url}`);\n      setReady(false);\n      setFailed(true);\n    };\n\n    document.head.appendChild(element);\n\n    return () => {\n      console.log(`Dynamic Script Removed: ${args.url}`);\n      document.head.removeChild(element);\n    };\n  }, [args.url])\n\n  return {\n    ready,\n    failed\n  };\n};\n\nconst RemoteReactComponent = ({ url, module, scope }) => {\n\n  const { ready, failed } = useDynamicScript({\n    url,\n  });\n\n  if (!ready) return <h2>Loading dynamic script: {url}</h2>;\n  \n  if (failed) return <h2>Failed to load dynamic script: {url}</h2>;\n\n  const Component = lazy(loadComponent(scope, module));\n\n  return (\n    <Suspense fallback=\"Loading System\">\n      <Component />\n    </Suspense>\n  )\n}\n\nconst theme = {\n  colors: {\n    primary: \"hotpink\",\n  },\n};\n\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n      <RecoilRoot>\n    <div style={{\n      padding: 10,\n    }}>\n      <RemoteReactComponent \n        url=\"http://localhost:3001/graph1/remoteEntry.js\"\n        module=\"graph1mod\"\n        scope=\"graph1scope\"\n      />\n    </div>\n    </RecoilRoot>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}